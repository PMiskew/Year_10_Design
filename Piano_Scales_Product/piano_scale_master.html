<!DOCTYPE html>
<html>
<head>
	<title>
		Piano Scale Helper
	</title>

	<style>

		legend {
    		background-color: #000;
    		color: #fff;
    		padding: 3px 6px;
		}

	
	</style>


</head>
<body>


  <div id = "entry">
    <legend>Piano Scale Generator</legend>
    <br/>

    <label>Select Scale</label>

    <select id = "scale_type">
     
     <option value = "1">Major</option>
     <option value = "2">Minor</option>

    </select>
    <br/>
    <br/>
    <label>Select Key</label>
    <select id = "scale_key">

      <option value = "0">A</option>
      <option value = "1">A#</option>
      <option value = "2">B</option>
      <option value = "3">C</option>
      <option value = "4">C#</option>
      <option value = "5">D</option>
      <option value = "6">D#</option>
      <option value = "7">E</option>
      <option value = "8">F</option>
      <option value = "9">F#</option>
      <option value = "10">G</option>
      <option value = "11">G#</option>

    </select>
    <br />
    <br />
    <input type="submit" onclick = "calculate();">

  </div>
  <br />
  <div id = "output">
    <canvas id="keyCanvas" width="310" height="130" style="border:1px solid #000000;">
    


    </canvas>
  </div>


<script>

  //**********This section draws the piano keys**********
  //gets canvas widget
  var c = document.getElementById("keyCanvas");
  var ctx = c.getContext("2d");
  

  //white keys
  ctx.beginPath();
  ctx.rect(5, 5, 20,100);
  ctx.rect(25, 5, 20,100);
  ctx.rect(45, 5, 20,100);
  ctx.rect(65, 5, 20,100);
  ctx.rect(85, 5, 20,100);
  ctx.rect(105, 5, 20,100);
  ctx.rect(125, 5, 20,100);
  ctx.rect(145, 5, 20,100);
  ctx.rect(165, 5, 20,100);
  ctx.rect(185, 5, 20,100);
  ctx.rect(205, 5, 20,100);
  ctx.rect(225, 5, 20,100);
  ctx.rect(245, 5, 20,100);
  ctx.rect(265, 5, 20,100);
  ctx.rect(285, 5, 20,100);
  ctx.stroke()

  //black keys
  ctx.beginPath();
  ctx.fillStyle = "black";
  
  ctx.rect(20, 5, 10,50); //black
  ctx.rect(40, 5, 10,50); //black

  ctx.rect(80, 5, 10,50); //black
  ctx.rect(100, 5, 10,50); //black
  ctx.rect(120, 5, 10,50); //black

  ctx.rect(160, 5, 10,50); //black 
  ctx.rect(180, 5, 10,50); //black

  ctx.rect(220, 5, 10,50); //black
  ctx.rect(240, 5, 10,50); //black
  ctx.rect(260, 5, 10,50); //black

  ctx.rect(300, 5, 5,50); //black

  ctx.fill();

  ctx.fillText("C", 12, 120);
  ctx.fillText("C", 145 + 6, 120);
  ctx.fillText("C", 285 + 6, 120);

  /*
  //THIS WAS CODED TO LOOK FOR A PATTERN TO SIMPLIFY LOGIC

  //circles
  ctx.beginPath();
  ctx.fillStyle = "orange";

  //white - blue marks
  ctx.rect(10,90,10,10)
  ctx.rect(30,90,10,10)
  ctx.rect(50,90,10,10)
  ctx.rect(70,90,10,10)
  ctx.rect(90,90,10,10)
  ctx.rect(110,90,10,10)
  ctx.rect(130,90,10,10)
  ctx.rect(150,90,10,10)
  ctx.rect(170,90,10,10)
  ctx.rect(190,90,10,10)
  ctx.rect(210,90,10,10)
  ctx.rect(230,90,10,10)
  ctx.rect(250,90,10,10)
  ctx.rect(270,90,10,10)
  ctx.rect(290,90,10,10)
        
  //black - blue marks
  ctx.rect(22,45,6,6)
  ctx.rect(42,45,6,6)

  ctx.rect(82,45,6,6)
  ctx.rect(102,45,6,6)
  ctx.rect(122,45,6,6)

  ctx.rect(162,45,6,6)
  ctx.rect(182,45,6,6)
  
  ctx.rect(222,45,6,6)
  ctx.rect(242,45,6,6)
  ctx.rect(262,45,6,6)



  ctx.fill()

  */

  //The list notes is used when calculating the resulting scale
	notes = ["A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];


  /*
  Calucate is invoked when the user presses hte submit button
  and calcuates and updates the display with the scale in the 
  indicated key. 
  */
	function calculate() {
	
    
		var s_select = document.getElementById("scale_type");
		var s_type = s_select.options[s_select.selectedIndex].value;

    var n_select = document.getElementById("scale_key");
    var n_type = n_select.options[n_select.selectedIndex].value;
    var n_type = parseInt(n_type);
    console.log(s_type,n_type)

     result = [notes[n_type],notes[n_type + 2],notes[n_type + 4],notes[n_type + 5],notes[n_type + 7],notes[n_type + 9],notes[n_type+11],notes[n_type+12]]
    
    if (s_type == "2") {
      result = [notes[n_type],notes[n_type + 2],notes[n_type + 3],notes[n_type + 5],notes[n_type + 7],notes[n_type + 8],notes[n_type+10],notes[n_type+12]]
    }
    
    console.log(result);

    //Canvas Update
    clearMarks();
    
    //Display root key

 
    

    //Update keyboard
    ctx.beginPath();
    ctx.fillStyle = "orange";

    for (i = 0; i < result.length; i = i + 1) {


      //blue marks sequential

      if (result[i] === 'A') {
        ctx.rect(110,90,10,10) //A
        ctx.rect(250,90,10,10) //A
      }
      else if (result[i] === 'A#') {
        ctx.rect(122,45,6,6) //A#  
        ctx.rect(262,45,6,6) //A#
      }
      else if (result[i] === 'B') {
        ctx.rect(130,90,10,10) //B
        ctx.rect(270,90,10,10) //B
      }
      else if (result[i] === 'C') {
        ctx.rect(10,90,10,10) //C
        ctx.rect(150,90,10,10) //C
        ctx.rect(290,90,10,10) //C
      }
      else if (result[i] === 'C#') {
        ctx.rect(22,45,6,6) //C#
        ctx.rect(162,45,6,6) //C#
      }
      else if (result[i] === 'D') {

        ctx.rect(170,90,10,10) //D 
        ctx.rect(30,90,10,10) //D
      }
      else if (result[i] === 'D#') {

        ctx.rect(182,45,6,6) //D#
        ctx.rect(42,45,6,6) //D#
      }
      else if (result[i] === 'E') {

        ctx.rect(190,90,10,10) //E
        ctx.rect(50,90,10,10) //E
      }
      else if (result[i] === 'F') {

        ctx.rect(210,90,10,10) //F
        ctx.rect(70,90,10,10) //F
      }
      else if (result[i] === 'F#') {

        ctx.rect(82,45,6,6) //F#
        ctx.rect(222,45,6,6) //F#
      }
      else if (result[i] === 'G') {
        ctx.rect(230,90,10,10) //G
        ctx.rect(90,90,10,10) //G
      }
      else if (result[i] === 'G#') {

        ctx.rect(102,45,6,6) //G#
        ctx.rect(242,45,6,6) //G#
      }
    }
    



    ctx.fill()


	}

  function clearMarks() {

    ctx.beginPath();
    ctx.fillStyle = "white";

    ctx.rect(10,90,10,10)
    ctx.rect(30,90,10,10)
    ctx.rect(50,90,10,10)
    ctx.rect(70,90,10,10)
    ctx.rect(90,90,10,10)
    ctx.rect(110,90,10,10)
    ctx.rect(130,90,10,10)
    ctx.rect(150,90,10,10)
    ctx.rect(170,90,10,10)
    ctx.rect(190,90,10,10)
    ctx.rect(210,90,10,10)
    ctx.rect(230,90,10,10)
    ctx.rect(250,90,10,10)
    ctx.rect(270,90,10,10)
    ctx.rect(290,90,10,10)

    ctx.fill()
    ctx.beginPath()
    //black - blue marks - clear
    ctx.fillStyle = "black"
    ctx.rect(22,45,6,6)
    ctx.rect(42,45,6,6)

    ctx.rect(82,45,6,6)
    ctx.rect(102,45,6,6)
    ctx.rect(122,45,6,6)

    ctx.rect(162,45,6,6)
    ctx.rect(182,45,6,6)

    ctx.rect(222,45,6,6)
    ctx.rect(242,45,6,6)
    ctx.rect(262,45,6,6)
    ctx.fill()

  }

</script>
</body>
</html>